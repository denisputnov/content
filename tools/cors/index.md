---
title: "Что такое CORS"
description: "Определяем куда ходить можно, а куда нельзя."
authors:
  - denisputnov
keywords:
  - code review
  - pull request
  - пул реквест
related:
  - tools/web-security
  - tools/http-protocol
  - js/fetch
tags:
  - article
---

## Кратко

_CORS_ расшифровывается как _Cross-Origin Resource Sharing_. Это механизм браузера, который поволяет определить список ресурсов, к которым страница может получить доступ. Он необходим для обеспечения безопасности и защиты пользователей от злоумышленников при использовании [HTTP протокола](/tools/http-protocol/).

По умолчанию, сайты могут запрашивать ресурсы только со своего домена. При этом важно, чтобы совпадали протокол и порт запрашиваемого ресурса.

Настройка доступа может происходить как со стороны браузера, так и со стороны сервера.

## Как работает

Рассмотрим пример работы _CORS_ без дополнительной настройки:

> Пользователь открывает страницу сайта `doka.guide`. На странице реализован запрос к стороннему серверу `api.example.com`.
> Браузер сравнивает домены и понимает, что `api.example.com` - сторонний домен для нашего сайта, из-за чего блокирует запрос.

Такие запросы с сайта на сайт называются _перекрёстными_.

Правильная настройка _CORS_ помогает решить возможные проблемы с доступом к другим ресурсам и обеспечить безопасность веб-приложений.

## Настройка

Для настройки _CORS_ со стороны сервера используются специальные заголовки запроса:
- `Access-Control-Allow-Origin` - указывает на домены, откуда на сервер разрешены запросы.
- `Access-Control-Allow-Methods` - указывает, какие [HTTP-методы](/tools/http-protocol/#startovaya-stroka) разрешены для запросов на сервер. Например, `GET`, `POST`, `DELETE` и др.
- `Access-Control-Allow-Headers` - определяет, какие заголовки могут быть использованы в ответе от сервера, которые не являются стандартными для [HTTP](/tools/http-protocol/).
- `Access-Control-Allow-Credentials` - указывает, разрешено ли отправлять [cookie](/js/cookie/) и авторизационные данные вместе с запросом на сервер. Для разрешения используется значение `true`.
- и другие.

Также есть зоголовок для настройки со стороны браузера:
- `Origin` - указывает на домен, откуда на сервер поступает запрос.

Когда страница запрашивает данные с другого домена, браузер отправляет предварительный запрос `OPTIONS` на сервер, чтобы узнать, разрешены ли такие запросы.

При отправке запроса на `api.example.com`, браузер проставит заголовок `Origin`, сформирует запрос в [определённом формате](/tools/http-protocol/#format-soobshcheniya) и отправит его на сервер:
```
OPTIONS / HTTP/1.1
Host: api.example.com
Origin: doka.guide
```

Если сервер запрещает доступ к ресурсу, то в резульате запроса в браузере мы увидим ошибку.

А если доступ разрешён, то сервер ответит на запрос заголовком:

`Access-Control-Allow-Origin: doka.guide`

Такая запись означает, что сервер разрешает доступ с домена `doka.guide`.

Также можно разрешить доступ сразу для нескольких доменов. Тогда запись будет выглядеть так:

`Access-Control-Allow-Origin: doka.guide github.com stackoverflow.com`

Или задать маску:
- `*.site.com` - для разрешения доступа с любого поддомена `site.com`.
- `*` - для разрешения доступа отовсюду.

## Важно помнить

_CORS_ работает только в браузере, а не на сервере. Поэтому необходимо правильно настроить сервер, чтобы он возвращал нужные заголовки при запросах с других доменов.
